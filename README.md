# 墨渊（MoYuan）· AI 小说生成器

> 一个面向中文长篇创作场景的单页 Web 工具：从人设与大纲出发，按章节生成、续写、润色，并支持本地持久化与全文导出。

## 项目简介

**墨渊** 是一个无需后端即可运行的前端应用，聚焦“可控地写完一本小说”这一目标。你可以先完成作品设定（题材、风格、角色、世界观、核心剧情），再按章节逐章生成正文，并在写作台进行小范围修改与迭代。

项目采用本地浏览器存储保存配置与创作进度，支持多模型提供商切换（如 DeepSeek / OpenAI / Claude / 自定义兼容端点），适合个人作者进行快速原型创作与中长篇内容打磨。

## 核心能力

- **完整创作工作流**：立项设定 → 章节规划 → AI 生成 → 局部修改 → 统计与导出。
- **多模型接入**：支持主流 provider 与自定义 endpoint/model，方便在不同模型间做效果与成本平衡。
- **流式生成体验**：可开启实时流式输出，提升长文本写作过程的可感知速度。
- **上下文连续性策略**：生成章节时自动引入前情摘要和上一章结尾，增强情节衔接。
- **章节级改写机制**：单章支持多轮“定向修改”，用于修辞优化、情节补全、语气统一等。
- **本地持久化**：作品内容与配置写入 `localStorage`，刷新页面后可继续写作。
- **导出能力**：支持导出 Markdown 与 TXT，便于归档、排版和二次加工。

## 界面结构

应用采用移动优先的四栏底部导航：

1. **设定**：书名、题材、风格、人物、世界观与大纲。
2. **章节**：管理章节列表、标题与章节概要。
3. **写作**：生成当前章节、查看实时输出、执行局部修改。
4. **存档**：查看统计信息与导出全书。

另含独立**设置页**，用于配置模型供应商、API Key、模型参数与流式开关。

## 快速开始

### 1) 获取代码

```bash
git clone <your-repo-url>
cd novel
```

### 2) 启动方式

这是一个纯静态页面项目，任选其一：

- **直接打开**：双击 `index.html`（功能可用，但部分浏览器策略下下载/复制体验可能受限）。
- **本地静态服务器（推荐）**：

```bash
python3 -m http.server 8000
```

然后访问：`http://localhost:8000`

### 3) 首次配置

1. 打开“设置”。
2. 选择 provider（DeepSeek/OpenAI/Claude/Custom）。
3. 填入对应 API Key。若为 Custom，补充 endpoint 与模型名。
4. 建议先点击“连接测试”确认可用性。

## 使用建议（创作质量）

- 在“核心剧情大纲”中写清 **起承转合与关键冲突**，比泛泛描述更能提升生成稳定性。
- 每章先写“章节概要”再生成正文，可明显降低跑题概率。
- 用“局部修改”处理小范围问题（措辞、节奏、人物一致性），避免整章反复重生。
- 重要章节建议分版本备份（导出 Markdown），便于回滚。

## 数据与安全说明

- 本工具默认将项目数据与部分配置保存在浏览器本地（`localStorage`）。
- API Key 的保存行为由“持久记住 API Key”开关控制。
- 请勿在不受信任设备上启用长期存储 Key。
- 本项目不内置后端转发服务，调用由浏览器直接请求对应模型接口。

## 兼容性

- 现代 Chromium / Safari / Firefox 均可运行。
- 若浏览器不支持 `ReadableStream`，可在设置中关闭流式输出后使用普通请求模式。

## 项目结构

```text
novel/
├─ index.html      # 单文件应用（UI / 样式 / 逻辑）
├─ LICENSE
└─ README.md
```

## 路线建议（可选）

后续可考虑：

- 增加章节版本历史与 diff 对比。
- 引入提示词模板管理（按题材/文风切换）。
- 增加一键导出 ePub/Docx。
- 支持云端同步与多设备续写。

## License

本项目遵循仓库中的 `LICENSE` 文件。
